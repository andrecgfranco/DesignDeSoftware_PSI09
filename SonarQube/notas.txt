Notas de Análise SonarQube – Projeto DesignDeSoftware

→ Linhas de código totais analisadas: ~10.300  
→ Repartição:
   • Frontend Angular – 8.424 linhas  
   • Backend Express – 1.896 linhas  

Qualidade Geral
- Quality Gate ainda não calculado.
- Grande parte das issues registadas estão associadas a Maintainability.
- Issues de Security quase inexistentes (apenas 1 ocorrência detetada no backend).

Security
- 1 issue no backend express-psi-backend (ride controller)
- 4 *Security Hotspots* ao total
- S/ vulnerabilidades críticas assinaladas

Reliability
- Total: 29 issues (21 no frontend + 8 no backend)
- Nenhum erro crítico – maioria consideradas moderadas/baixas

Maintainability (principais problemas)
- Total: 351 issues  
- 294 no frontend | 57 no backend
- Problemas mais frequentes:
  Falhas de contraste no CSS (acessibilidade)  
  Código redundante / imports não utilizados  
  Estrutura e legibilidade do código a melhorar  

Duplicação
- Frontend: 1.5%  
- Backend: 8.5% (potencial para otimização e remoção de código repetido)

Conclusões rápidas
- O projeto está funcional mas tem elevada necessidade de melhoria de manutenibilidade.
- A correção imediata deve focar-se em:
  1. Limpeza de imports e código morto.
  2. Corrigir warnings de acessibilidade e formatação CSS.
  3. Reduzir duplicação no backend.

Issues a resolver: 

  - Segurança no ride controller (Input sujeito a injections): DONE
    Severity: Blocker
    Change this code to not construct database queries directly from user-controlled data.
    NoSQL operations should not be vulnerable to injection attacks  
    Solução: Normalizar e validar o input usado na query, invés de usar o input diretamente na query, de modo a evitar injections.
  - Duplicate IDs: DONE
    Severity: High
    HTML elements should have unique IDs 
    Solução: renomear o ID para algo unico ou trocar IDs para classes.
  - Implementacao de OnInit() do angular (todos os componentes): DONE
    Severity: Blocker
    Lifecycle interface 'OnInit' should be implemented for method 'ngOnInit'. 
    Solução: importar e adicionar as assinaturas das classes "implements OnInit"
  - Unexpected var use let or const instead (vários ficheiros): 
    Severity: High
    Variables should be declared with "let" or "const"
    Solução: usar "let" ou "const" inves de "var"
  - Uso de Number.isNaN e Number.parseFloat (varios ficheiros):
    Severity: Medium
    Prefer `Number.parseFloat` over `parseFloat`.
    Prefer `Number.isNaN` over `isNaN`.
    Solução: Alterar para Number.* todas as ocorrências
  - Outros pequenos issues de reliability 

  Foi identificado um conjunto de ocorrências com severidade "Blocker" relacionadas com a propriedade `standalone: false`. 
  O SonarQube sugere a adoção de componentes standalone para aumentar modularidade e reduzir 
  dependência de NgModules, mas esta alteração exige reestruturação profunda de toda a aplicação Angular. 

  Por implicar reescrita arquitetural em larga escala, esta recomendação foi documentada como melhoria 
  futura e não aplicada no âmbito deste trabalho, dado que a mudança impactaria o funcionamento global 
  sem ganho imediato proporcional.

  Os issues restantes prendem-se maioritariamente em questões de baixa importancia para o funcionamento do projeto, pequenas alteração espalhadas por 
  todos os ficheiros como: 
    Imports não usados ou repetidos, minimal contrast requirements, duplicações 


Qualidade Geral - Após correções
- Quality Gate → PASSED
- Security sem problemas críticos
- Remoção de todos os issues possiveis com severidade High e Blocker
- Maintainability ainda com elevada incidência de issues

Security
- 0 issues ativas após correções (antes havia 1)
- 4 Security Hotspots (não críticos, apenas recomendação de revisão)
- Nenhuma vulnerabilidade crítica identificada

Reliability
- Após correções → 0 issues ativas

Maintainability
- Após melhorias → 292 issues restantes  
- 157 Mediums, 102 Lows e 33 Blockers (standalone=false)
- Principais causas:
  • Falhas de contraste CSS  
  • Código redundante / imports não utilizados  
  • Melhorias de legibilidade e estrutura  
  • Recomendações standalone Angular (não implementadas devido a impacto global)

Duplicação
- Frontend: 1.5%  
- Backend: 8.5%  
→ Existe margem para remoção e modularização de lógica repetida no servidor

Conclusão Geral
- O projeto apresenta boa segurança e fiabilidade para trabalho académico.
- Manutenibilidade ainda a melhorar, mas já com evolução visível após intervenções.
- Recomendações futuras:
  → refactor modular Angular  
  → melhorar contraste e acessibilidade  
  → reduzir duplicação lógica no backend

| Métrica             | Antes       | Depois      |
|---------------------|-------------|-------------|
| Security Issues     | 1           | 0           |
| Reliability Issues  | 29          | 0           |
| Maintainability     | 351         | 292         |
| Duplicação Backend  | 8.5%        | 8.5%        |
| Duplicação Frontend | 1.5%        | 1.5%        |
